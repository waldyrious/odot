<!doctype html>
<html lang=en>
	<head>
		<meta charset=utf-8>
		<title>Odot - a simple but powerful task manager</title>
		<link rel='icon' type='image/png' href='favicon.png'>
		<!-- icon CC-BY 3.0 Yusuke Kamiyamane: http://p.yusukekamiyamane.com/ -->
		<!--<script src='//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js'></script>-->
		<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.js'></script>
		<script>
			var treeData = {"key1": "val1", 
							"key2": "val2",
							"key3": "val3"};

			function saveTree(){
				$.ajax({
					global: false,
					type: "POST",
					cache: false,
					dataType: "text",
					data: ({
						action: 'write',
						json_string: JSON.stringify(treeData)
					}),
					url: 'read-write.php',
					complete: function(xhr){ console.log(xhr.responseText); }
				});
			}

			function loadTree(){
				$.ajax({
					global: false,
					type: "POST",
					cache: false,
					dataType: "json",
					data: ({
						action: 'read'
					}),
					url: 'read-write.php',
					success: function(json_string){
						treeData = JSON.parse(json_string);
					}
				});
			}
		</script>
	</head>
	<body>
		<ul>
			<li><a href="#" onclick="loadTree()">load</a></li>
			<li><a href="#" onclick="saveTree()">save</a></li>
		</ul>
	</body>
</html>

